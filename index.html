<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G√©n√©rateur de Script VPS</title>
    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='grad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23667eea;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23764ba2;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='100' height='100' rx='20' fill='url(%23grad)'/%3E%3Ctext x='50' y='70' font-size='60' text-anchor='middle' fill='white'%3E%F0%9F%9A%80%3C/text%3E%3C/svg%3E">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <header>
            <h1>üöÄ G√©n√©rateur de Script d'Installation VPS</h1>
            <p class="subtitle">Configurez votre serveur en quelques clics</p>
        </header>

        <div class="form-container">
            <!-- was: <form id="configForm" ...> -->
            <div id="configForm" class="config-form" autocomplete="on">
                <!-- Section Variables -->
                <section class="section">
                    <h2>üìù Variables de Configuration</h2>

                    <!-- Configuration G√©n√©rale -->
                    <div class="config-group highlighted">
                        <h3 class="group-title">üåê Configuration G√©n√©rale</h3>
                        <div class="form-grid single-column">
                            <div class="form-group">
                                <label for="sftpSite">üåê Nom du site / Projet</label>
                                <input type="text" id="sftpSite" value="" placeholder="Ex: monsite, myblog, project">
                                <small class="input-hint">Ce nom sera utilis√© pour cr√©er les dossiers du projet</small>
                            </div>
                        </div>
                    </div>

                    <!-- NEW: wrapper 2 colonnes -->
                    <div class="config-two-col">
                        <!-- Groupe SFTP (sub-form to avoid "multiple credential sets in one form") -->
                        <form id="sftpForm" class="subform" autocomplete="on" novalidate>
                            <div class="config-group">
                                <h3 class="group-title">üîê Configuration SFTP</h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="sftpUser">üë§ Utilisateur SFTP</label>
                                        <div class="input-wrap">
                                            <input type="text" id="sftpUser" value="" placeholder="Ex: sftp-user-root"
                                                autocomplete="section-sftp username" minlength="8">
                                            <span id="sftpUserCounter" class="char-counter" aria-live="polite">0</span>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="sftpPass">üîë Mot de passe SFTP</label>
                                        <div class="input-wrap">
                                            <input type="password" id="sftpPass" value="" placeholder="Mot de passe s√©curis√©"
                                                autocomplete="section-sftp new-password" minlength="8">
                                            <button type="button" class="toggle-password" data-target="sftpPass"
                                                aria-label="Afficher le mot de passe" aria-pressed="false">üëÅÔ∏è</button>
                                            <span id="sftpPassCounter" class="char-counter" aria-live="polite">0</span>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="sftpGroup">üë• Groupe SFTP</label>
                                        <div class="input-wrap">
                                            <input type="text" id="sftpGroup" value="" placeholder="Ex: sftpusers" minlength="8">
                                            <span id="sftpGroupCounter" class="char-counter" aria-live="polite">0</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>

                        <!-- Groupe MySQL (sub-form) -->
                        <form id="mysqlForm" class="subform" autocomplete="on" novalidate>
                            <div class="config-group">
                                <h3 class="group-title">üíæ Configuration MySQL/MariaDB</h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="mysqlUser">üë§ Utilisateur MySQL</label>
                                        <input type="text" id="mysqlUser" value="" placeholder="Ex: dbuser ou admin_db"
                                            autocomplete="section-mysql username">
                                    </div>
                                    <div class="form-group">
                                        <label for="mysqlPass">üîê Mot de passe MySQL</label>
                                        <div class="input-wrap">
                                            <input type="password" id="mysqlPass" value="" placeholder="Mot de passe fort"
                                                autocomplete="section-mysql new-password">
                                            <button type="button" class="toggle-password" data-target="mysqlPass"
                                                aria-label="Afficher le mot de passe" aria-pressed="false">üëÅÔ∏è</button>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="mysqlDb">üóÑÔ∏è Nom de la base de donn√©es</label>
                                        <input type="text" id="mysqlDb" value="" placeholder="Ex: ma_base ou mydb">
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </section>

                <!-- Section Modules -->
                <section class="section">
                    <h2>üéØ S√©lectionnez les modules √† installer</h2>
                    <div class="modules-grid">
                        <label class="module-card">
                            <input type="checkbox" id="moduleSystem" checked>
                            <div class="module-content">
                                <span class="module-icon">üîÑ</span>
                                <span class="module-title">Mise √† jour syst√®me</span>
                            </div>
                        </label>

                        <label class="module-card">
                            <input type="checkbox" id="moduleApache" checked>
                            <div class="module-content">
                                <span class="module-icon">üåê</span>
                                <span class="module-title">Apache2</span>
                            </div>
                        </label>

                        <label class="module-card">
                            <input type="checkbox" id="moduleFirewall" checked>
                            <div class="module-content">
                                <span class="module-icon">üî•</span>
                                <span class="module-title">Pare-feu (UFW)</span>
                            </div>
                        </label>

                        <label class="module-card">
                            <input type="checkbox" id="moduleSftp" checked>
                            <div class="module-content">
                                <span class="module-icon">üîê</span>
                                <span class="module-title">SFTP</span>
                            </div>
                        </label>

                        <label class="module-card">
                            <input type="checkbox" id="modulePhp" checked>
                            <div class="module-content">
                                <span class="module-icon">üêò</span>
                                <span class="module-title">PHP 8.3</span>
                            </div>
                        </label>

                        <label class="module-card">
                            <input type="checkbox" id="moduleComposer" checked>
                            <div class="module-content">
                                <span class="module-icon">üì¶</span>
                                <span class="module-title">Composer</span>
                            </div>
                        </label>

                        <label class="module-card">
                            <input type="checkbox" id="moduleMariadb" checked>
                            <div class="module-content">
                                <span class="module-icon">üíæ</span>
                                <span class="module-title">MariaDB</span>
                            </div>
                        </label>

                        <label class="module-card">
                            <input type="checkbox" id="modulePhpmyadmin" checked>
                            <div class="module-content">
                                <span class="module-icon">üß∞</span>
                                <span class="module-title">phpMyAdmin</span>
                            </div>
                        </label>
                    </div>

                    <!-- Bouton de pr√©visualisation des modules -->
                    <div class="preview-section">
                        <button id="previewModulesBtn" class="btn btn-info" type="button">
                            üëÅÔ∏è Pr√©visualiser les modules s√©lectionn√©s
                        </button>
                    </div>
                </section>

                <!-- Zone d'erreur validation -->
                <div id="formError" class="form-error" role="alert" aria-live="polite"></div>

                <!-- Boutons d'action -->
                <div class="action-buttons">
                    <button id="generateBtn" class="btn btn-primary" type="button">
                        ‚ö° G√©n√©rer le script complet
                    </button>
                    <button id="selectAllBtn" class="btn btn-secondary" type="button">
                        ‚úÖ Tout s√©lectionner
                    </button>
                    <button id="deselectAllBtn" class="btn btn-secondary" type="button">
                        ‚ùå Tout d√©s√©lectionner
                    </button>
                    <small class="input-hint action-note">
                        Le script complet n√©cessite que toutes les variables SFTP et MySQL soient renseign√©es.
                    </small>
                </div>
            </div>
            <!-- was: </form> -->
        </div>

        <!-- Zone de r√©sultat - REMOVED -->
    </div>

    <!-- Popup Modal -->
    <div id="moduleModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üì¶ Modules S√©lectionn√©s</h2>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div id="selectedModulesList"></div>
                <div class="modal-script">
                    <h3>üîß Script g√©n√©r√© pour ces modules :</h3>
                    <pre id="moduleScriptPreview"></pre>
                </div>
            </div>
            <div class="modal-footer">
                <button id="copyModuleScriptBtn" class="btn btn-success">
                    üìã Copier le script
                </button>
                <button id="downloadModuleScriptBtn" class="btn btn-success">
                    üíæ T√©l√©charger install.sh
                </button>
                <button id="closeModalBtn" class="btn btn-secondary">
                    ‚ùå Fermer
                </button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>